{% extends "base.html" %}
{% import "macros.html" as macros -%}

{% block stylesheets %}
{{ macros.cacheBustedStylesheet('later', 'later.css') }}
{% endblock %}

{% block scripts %}
{{ macros.cacheBustedScript('later', 'later.js') }}
{% endblock %}


{% block page_body %}

<main>
    <div class="content-wrapper">
        <div class="bookmarklet-container">
            <div class="inner">
                <a href="javascript:e=encodeURIComponent;m=document.querySelectorAll('META[name=description]');void(window.open('{{ base }}/later?comments=' + e(window.getSelection().toString()||(m.length>0?m[0].getAttribute('content'):'')) + '&url='+e(window.location.href) + '&title='+e(document.title), 'later'))" rel="noreferrer">{{ macros.bookmarkletIcon }} later</a>
            </div>
        </div>

        <form id="later-form" method="post" action="/archive">
            <div class="{% if not error %}hidden{% endif %} error message">{{ error }}</div>
            <div class="hidden success message">Success!</div>

            <div class="field">
                <label for="title">Title:</label>
                <input type="text" id="title" name="title" value="{{ title|default('', true)|e }}"/>
            </div>

            <div class="field">
                <label for="url">Address:</label>
                <input type="text" id="url" name="url" data-original-value="{{url|default('', true)}}" value="{{ url|default('', true)|e }}"/>
                <div class="shortcuts">
                    <a class="remove-querystring hidden" href="#" rel="noreferrer">Remove querystring</a>
                    <a class="remove-hash hidden" href="#" rel="noreferrer">Remove hash</a>
                    <a class="revert hidden" href="#" rel="noreferrer">Revert</a>
                </div>
            </div>

            <div class="field">
                <label for="url">Tags:</label>
                <input type="text" id="tags" name="tags" value="{{ tags|default('', true)|e }}"/>
            </div>

            <div class="field">
                <label for="comments">Comments:</label>
                <textarea id="comments" name="comments">{{ comments|default('', true)|e }}</textarea>
                <div class="shortcuts">
                    <a class="trim-sentence-from-start hidden" href="#" rel="noreferrer">Trim sentence from start</a>
                    <a class="trim-sentence-from-end hidden" href="#" rel="noreferrer">Trim sentence from end</a>
                    <a class="trim-all hidden" href="#" rel="noreferrer">Clear</a>
                </div>
            </div>

            <div class="field">
                <button data-default="Save" data-alt="Please wait">Save</button>
            </div>
        </div>
    </div>

</main>


{% endblock %}
