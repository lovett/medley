{% extends "base.html" %}
{% import "macros.html" as macros -%}

{% block stylesheets %}
{{ macros.cacheBustedStylesheet('archive', 'archive.css') }}
{% endblock %}

{% block scripts %}
{{ macros.vueApp('main', ('discardable-record', 'discard-button', 'wayback-link')) }}
{% endblock %}

{% block page_body %}

<main>
    {{ macros.svgSymbols("delete") }}

    <form class="content-wrapper" method="get" action="/archive">
        <div class="field">
            <input type="text" id="query" name="query" value="{{ query|default('', true) }}"/>
        </div>
        <div class="field-group">
            <div class="field">
                <button>Search</button>
            </div>
            <div class="field align-right">
                <a href="/archive">Reset</a>
            </div>
        </div>
    </form>

    <div class="content-wrapper">
        <p {% if bookmarks %}class="hidden nothing-message"{% endif %}>Nothing found</p>

        {% for bookmark in bookmarks %}

        <discardable-record inline-template url="/archive?url={{ bookmark.url|urlencode }}">
            <div class="bookmark" v-bind:style="styles">
                <div class="actions">
                    <discard-button tooltip="Delete this bookmark" />
                </div>

                <h2><a href="{{ bookmark.url|anonymize }}" rel="noreferrer" target="_blank">{{ bookmark.title }}</a></h2>

                <p class="meta">
                    <time>{{ bookmark.added|localtime|dateformat("MMMM D, YYYY") }}</time>
                    |
                    <span class="domain">{{ bookmark.domain }}</span>
                    | <wayback-link url="/archive?wayback={{ bookmark.url|urlencode }}" />
                </p>

                {% if bookmark.comments %}
                <p class="comments">
                    {{ bookmark.comments }}
                </p>
                {% endif %}
            </div>
        </discardable-record>

        {% endfor %}
    </div>
</main>

{% endblock %}
