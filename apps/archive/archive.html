{% extends "base.html" %}

{% set home_link = True %}

{% block stylesheets %}
<link rel="stylesheet" type="text/css" href="/static/archive/archive.css" />
{% endblock %}

{% block scripts %}
<script src="/static/archive/archive.js"></script>
{% endblock %}

{% block svg_defs %}
{% endblock %}

{% block page_body %}

<main>

    <form class="content-wrapper" method="get" action="/archive">
        <div class="field">
            <input type="text" id="q" name="q" value="{{ q|default('', true) }}"/>
        </div>
        <div class="field">
            <button>Search</button>
        </div>
    </form>

    <div class="content-wrapper">

        <p {% if entries %}class="hidden nothing-message"{% endif %}>Nothing found</p>

        {% for key, entries in entries.items() %}
        <h1 class="date-group">{{ entries[0].created|localtime("date-full") }}</h1>
        {% for entry in entries %}
        <div class="bookmark">
            <div class="actions">
                <a href="#" class="delete" data-uid="{{ entry.rowid }}">
                    <svg class="icon icon-bin"><use xlink:href="#icon-bin"></use></svg>
                </a>
            </div>

            <time>
                {{ entry.created|localtime("time12") }}
            </time>
            <h2><a href="{{ entry.url|anonymize }}" rel="noreferrer" target="_blank">{{ entry.title }}</a></h2>
            <a class="domain" href="{{ entry.domain|anonymize }}" rel="noreferrer" target="_blank">{{ entry.domain }}</a>

            {% if not entry.has_fulltext %}
            <div class="meta">
                No fulltext available
            </div>
            {% endif %}

            {% if entry.comments %}
            <div class="comments">
                {{ entry.comments }}
            </div>
            {% endif %}
        </div>
        {% endfor %}

        {% endfor %}
    </div>
</main>

{% endblock %}
