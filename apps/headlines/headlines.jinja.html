{% extends "apps/static/templates/base.jinja.html" %}
{% import "apps/static/templates/macros.jinja.html" as macros -%}

{% block stylesheets %}
    {{ macros.asset("css/headlines.css") }}
{% endblock %}

{% block scripts %}
    {{ macros.asset("js/headlines.js") }}
{% endblock %}

{% block page_body %}
    {{ macros.svgSymbols("globe") }}
    <main>
        <header id="app-nav">
            <a href="{{ ms_rewards.anonymized }}" rel="noreferrer" target="_blank">
                <svg class="icon"><use xlink:href="#icon-globe"></use></svg>
                MS Rewards
            </a>
            <a href="{{ bing.anonymized }}" rel="noreferrer" target="_blank">
                <svg class="icon"><use xlink:href="#icon-globe"></use></svg>
                Bing
            </a>
            <button
                data-walk-start="{{ walk_start }}"
                data-walk-stop="{{ walk_stop }}"
            >Walk links {{ walk_start }} â€“ {{ walk_stop }}</button>
        </header>

        <section id="headlines">
            {% set ns = namespace(loop_count=1) %}
            {% for category in headlines %}
                <div class="group">
                    <h2>{{ category|capitalize }}</h2>

                    <ol start="{{ ns.loop_count }}">
                        {% for article in headlines[category] %}
                            {% set ns.loop_count = ns.loop_count + 1 %}
                            <li>
                                <a class="title"
                                   href="{{ article.anonymized }}"
                                   rel="noreferrer"
                                   data-search-href="{{ bing }}/search/?q={{ article.text|urlencode }}"
                                >{{ article.text }}</a>
                            </li>
                        {% endfor %}
                    </ol>
                </div>
            {% endfor %}
        </section>

        <footer>
            <p>Powered by <a href="https://newsapi.org">News API</a></p>
        </footer>

    </main>

{% endblock %}
