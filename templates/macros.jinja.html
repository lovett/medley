{# Instantiate a Vue application instance.

This loads the Vue library along with the desired component files. It also
instantiates a root Vue instance which renders each component. #}
{% macro vueApp(el_selector, components=(), app_name='app', with_library=True) %}

    {% if with_library %}
        <script src="/shared/static/js/vue.js"></script>
    {% endif %}

    {% for component in components %}
        {% if component.startswith('/') %}
            <script src="{{ component|cache_bust }}"></script>
        {% else %}
            <script src="{{ '/shared/static/components/{}.js'.format(component)|cache_bust }}"></script>
        {% endif %}
    {% endfor %}

    <script>
        const {{ app_name }} = new Vue({
            el: '{{ el_selector }}',
        })
    </script>
{% endmacro %}

{# Bring SVG symbol definitions onto the page in a hidden SVG tag.

This is the master list of all available symbols. Only the ones specified
in the argument list are returned.  #}
{% macro svgSymbols() %}
    <svg hidden version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
        <defs>
            {% if "download" in varargs %}
                <symbol id="icon-download" viewBox="0 0 20 20">
                    <title>download</title>
                    <path d="M13 8v-6h-6v6h-5l8 8 8-8h-5zM0 18h20v2h-20v-2z"></path>
                </symbol>
            {% endif %}

            {% if "edit" in varargs %}
                <symbol id="icon-edit" viewBox="0 0 32 32">
                    <title>edit</title>
                    <path d="M27 0c2.761 0 5 2.239 5 5 0 1.126-0.372 2.164-1 3l-2 2-7-7 2-2c0.836-0.628 1.874-1 3-1zM2 23l-2 9 9-2 18.5-18.5-7-7-18.5 18.5zM22.362 11.362l-14 14-1.724-1.724 14-14 1.724 1.724z"></path>
                </symbol>
            {% endif %}

            {% if "link" in varargs %}
                <symbol id="icon-link" viewBox="0 0 32 32">
                    <title>link</title>
                    <path d="M13.757 19.868c-0.416 0-0.832-0.159-1.149-0.476-2.973-2.973-2.973-7.81 0-10.783l6-6c1.44-1.44 3.355-2.233 5.392-2.233s3.951 0.793 5.392 2.233c2.973 2.973 2.973 7.81 0 10.783l-2.743 2.743c-0.635 0.635-1.663 0.635-2.298 0s-0.635-1.663 0-2.298l2.743-2.743c1.706-1.706 1.706-4.481 0-6.187-0.826-0.826-1.925-1.281-3.094-1.281s-2.267 0.455-3.094 1.281l-6 6c-1.706 1.706-1.706 4.481 0 6.187 0.635 0.635 0.635 1.663 0 2.298-0.317 0.317-0.733 0.476-1.149 0.476z"></path>
                    <path d="M8 31.625c-2.037 0-3.952-0.793-5.392-2.233-2.973-2.973-2.973-7.81 0-10.783l2.743-2.743c0.635-0.635 1.664-0.635 2.298 0s0.635 1.663 0 2.298l-2.743 2.743c-1.706 1.706-1.706 4.481 0 6.187 0.826 0.826 1.925 1.281 3.094 1.281s2.267-0.455 3.094-1.281l6-6c1.706-1.706 1.706-4.481 0-6.187-0.635-0.635-0.635-1.663 0-2.298s1.663-0.635 2.298 0c2.973 2.973 2.973 7.81 0 10.783l-6 6c-1.44 1.44-3.355 2.233-5.392 2.233z"></path>
                </symbol>
            {% endif %}

            {% if "arrow-right" in varargs %}
                <symbol id="icon-arrow-right" viewBox="0 0 1024 1024">
                    <title>arrow-right</title>
                    <path class="path1" d="M992 512l-480-480v288h-512v384h512v288z"></path>
                </symbol>
            {% endif %}

            {% if "arrow-left" in varargs %}
                <symbol id="icon-arrow-left" viewBox="0 0 1024 1024">
                    <title>arrow-left</title>
                    <path class="path1" d="M32 512l480 480v-288h512v-384h-512v-288z"></path>
                </symbol>
            {% endif %}

            {% if "delete" in varargs %}
                <symbol id="delete" viewBox="0 0 1024 1024">
                    <title>Delete</title>
                    <path class="path1" d="M128 320v640c0 35.2 28.8 64 64 64h576c35.2 0 64-28.8 64-64v-640h-704zM320 896h-64v-448h64v448zM448 896h-64v-448h64v448zM576 896h-64v-448h64v448zM704 896h-64v-448h64v448z"></path>
                    <path class="path2" d="M848 128h-208v-80c0-26.4-21.6-48-48-48h-224c-26.4 0-48 21.6-48 48v80h-208c-26.4 0-48 21.6-48 48v80h832v-80c0-26.4-21.6-48-48-48zM576 128h-192v-63.198h192v63.198z"></path>
                </symbol>
            {% endif %}

            {% if "chart" in varargs %}
            <symbol id="icon-chart" viewBox="0 0 32 32">
                <title>chart</title>
                <path d="M4 28h28v4h-32v-32h4zM9 26c-1.657 0-3-1.343-3-3s1.343-3 3-3c0.088 0 0.176 0.005 0.262 0.012l3.225-5.375c-0.307-0.471-0.487-1.033-0.487-1.638 0-1.657 1.343-3 3-3s3 1.343 3 3c0 0.604-0.179 1.167-0.487 1.638l3.225 5.375c0.086-0.007 0.174-0.012 0.262-0.012 0.067 0 0.133 0.003 0.198 0.007l5.324-9.316c-0.329-0.482-0.522-1.064-0.522-1.691 0-1.657 1.343-3 3-3s3 1.343 3 3c0 1.657-1.343 3-3 3-0.067 0-0.133-0.003-0.198-0.007l-5.324 9.316c0.329 0.481 0.522 1.064 0.522 1.691 0 1.657-1.343 3-3 3s-3-1.343-3-3c0-0.604 0.179-1.167 0.487-1.638l-3.225-5.375c-0.086 0.007-0.174 0.012-0.262 0.012s-0.176-0.005-0.262-0.012l-3.225 5.375c0.307 0.471 0.487 1.033 0.487 1.637 0 1.657-1.343 3-3 3z"></path>
            </symbol>
            {% endif %}

            {% if "copy" in varargs %}
                <symbol id="copy" viewBox="0 0 32 32">
                    <title>Copy</title>
                    <path d="M20 8v-8h-14l-6 6v18h12v8h20v-24h-12zM6 2.828v3.172h-3.172l3.172-3.172zM2 22v-14h6v-6h10v6l-6 6v8h-10zM18 10.828v3.172h-3.172l3.172-3.172zM30 30h-16v-14h6v-6h10v20z"></path>
                </symbol>
            {% endif %}

            {% if "add-item" in varargs %}
                <symbol id="add-item" viewBox="0 0 20 20">
                    <title>add-solid</title>
                    <path d="M11 9v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zM10 20c-5.523 0-10-4.477-10-10s4.477-10 10-10v0c5.523 0 10 4.477 10 10s-4.477 10-10 10v0z"></path>
                </symbol>
            {% endif %}

            {% if "globe" in varargs %}
                <symbol id="icon-globe" viewBox="0 0 20 20">
                    <title>globe</title>
                    <path d="M10 20c-5.523 0-10-4.477-10-10s4.477-10 10-10v0c5.523 0 10 4.477 10 10s-4.477 10-10 10v0zM12 17.75c1.602-0.424 2.964-1.287 3.993-2.451l0.007-0.009v-6.29c-1.105 0-2-0.895-2-2v0-3.93c-0.864-0.506-1.879-0.86-2.961-0.996l-0.039-0.004v0.93c0 1.105-0.895 2-2 2v0 1c0 1.105-0.895 2-2 2v0 2h3c1.105 0 2 0.895 2 2v0 5.75zM8 17.75v-2.75c-1.105 0-2-0.895-2-2v0-1h-0.5c-0.828 0-1.5-0.672-1.5-1.5v0-2.5h-1.75c-0.16 0.599-0.253 1.287-0.253 1.996 0 3.71 2.523 6.832 5.947 7.742l0.056 0.013z"></path>
                </symbol>
            {% endif %}

            {% if "new-item" in varargs %}
                <symbol id="new-item" viewBox="0 0 32 32">
                    <title>New item</title>
                    <path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
                </symbol>
            {% endif %}

            {% if "icon-tag" in varargs %}
                <symbol id="icon-tag" viewBox="0 0 32 32">
                    <title>tag</title>
                    <path d="M30.5 0h-12c-0.825 0-1.977 0.477-2.561 1.061l-14.879 14.879c-0.583 0.583-0.583 1.538 0 2.121l12.879 12.879c0.583 0.583 1.538 0.583 2.121 0l14.879-14.879c0.583-0.583 1.061-1.736 1.061-2.561v-12c0-0.825-0.675-1.5-1.5-1.5zM23 12c-1.657 0-3-1.343-3-3s1.343-3 3-3 3 1.343 3 3-1.343 3-3 3z"></path>
                </symbol>
            {% endif %}

            {% if "icon-tag-stack" in varargs%}
                <symbol id="icon-tag-stack" viewBox="0 0 40 32">
                    <title>tag stack</title>
                    <path d="M38.5 0h-12c-0.825 0-1.977 0.477-2.561 1.061l-14.879 14.879c-0.583 0.583-0.583 1.538 0 2.121l12.879 12.879c0.583 0.583 1.538 0.583 2.121 0l14.879-14.879c0.583-0.583 1.061-1.736 1.061-2.561v-12c0-0.825-0.675-1.5-1.5-1.5zM31 12c-1.657 0-3-1.343-3-3s1.343-3 3-3 3 1.343 3 3-1.343 3-3 3z"></path>
                    <path d="M4 17l17-17h-2.5c-0.825 0-1.977 0.477-2.561 1.061l-14.879 14.879c-0.583 0.583-0.583 1.538 0 2.121l12.879 12.879c0.583 0.583 1.538 0.583 2.121 0l0.939-0.939-13-13z"></path>
                </symbol>
            {% endif %}

            {% if "binoculars" in varargs %}
                <symbol id="icon-binoculars" viewBox="0 0 1024 1024">
                    <title>binoculars</title>
                    <path d="M64 0h384v64h-384zM576 0h384v64h-384zM952 320h-56v-256h-256v256h-256v-256h-256v256h-56c-39.6 0-72 32.4-72 72v560c0 39.6 32.4 72 72 72h304c39.6 0 72-32.4 72-72v-376h128v376c0 39.6 32.4 72 72 72h304c39.6 0 72-32.4 72-72v-560c0-39.6-32.4-72-72-72zM348 960h-248c-19.8 0-36-14.4-36-32s16.2-32 36-32h248c19.8 0 36 14.4 36 32s-16.2 32-36 32zM544 512h-64c-17.6 0-32-14.4-32-32s14.4-32 32-32h64c17.6 0 32 14.4 32 32s-14.4 32-32 32zM924 960h-248c-19.8 0-36-14.4-36-32s16.2-32 36-32h248c19.8 0 36 14.4 36 32s-16.2 32-36 32z"></path>
                </symbol>
            {% endif %}

            {% if "search" in varargs %}
                <symbol id="icon-search" viewBox="0 0 20 20">
                    <title>search</title>
                    <path d="M12.9 14.32c-1.34 1.049-3.050 1.682-4.908 1.682-4.418 0-8-3.582-8-8s3.582-8 8-8c4.418 0 8 3.582 8 8 0 1.858-0.633 3.567-1.695 4.925l0.013-0.018 5.35 5.33-1.42 1.42-5.33-5.34zM8 14c3.314 0 6-2.686 6-6s-2.686-6-6-6v0c-3.314 0-6 2.686-6 6s2.686 6 6 6v0z"></path>
                </symbol>
            {% endif %}

            {% if "database" in varargs %}
                <symbol id="icon-database" viewBox="0 0 32 32">
                    <title>database</title>
                    <path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
                    <path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
                    <path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
                </symbol>
            {% endif %}

            {% if "flag" in varargs %}
                <symbol id="icon-flag" viewBox="0 0 1024 1024">
                    <title>flag</title>
                    <path class="path1" d="M614 256h240v426h-300l-16-84h-240v298h-84v-726h384z"></path>
                </symbol>
            {% endif %}

            {% if "clock" in varargs %}
                <symbol id="icon-clock" viewBox="0 0 1024 1024">
                    <title>clock</title>
                    <path class="path1" d="M658.744 749.256l-210.744-210.746v-282.51h128v229.49l173.256 173.254zM512 0c-282.77 0-512 229.23-512 512s229.23 512 512 512 512-229.23 512-512-229.23-512-512-512zM512 896c-212.078 0-384-171.922-384-384s171.922-384 384-384c212.078 0 384 171.922 384 384s-171.922 384-384 384z"></path>
                </symbol>
            {% endif %}


            {% if "bookmark" in varargs %}
                <symbol id="icon-bookmark" viewBox="0 0 1024 1024">
                    <title>bookmark</title>
                    <path class="path1" d="M192 0v1024l320-320 320 320v-1024z"></path>
                </symbol>
            {% endif %}

            {% if "tag" in varargs %}
                <symbol id="icon-tag" viewBox="0 0 32 32">
                    <title>tag</title>
                    <path d="M30.5 0h-12c-0.825 0-1.977 0.477-2.561 1.061l-14.879 14.879c-0.583 0.583-0.583 1.538 0 2.121l12.879 12.879c0.583 0.583 1.538 0.583 2.121 0l14.879-14.879c0.583-0.583 1.061-1.736 1.061-2.561v-12c0-0.825-0.675-1.5-1.5-1.5zM23 12c-1.657 0-3-1.343-3-3s1.343-3 3-3 3 1.343 3 3-1.343 3-3 3z"></path>
                </symbol>
            {% endif %}

            {% if "close" in varargs %}
                <symbol id="icon-close" viewBox="0 0 20 20">
                    <title>close-solid</title>
                    <path d="M2.93 17.070c-1.884-1.821-3.053-4.37-3.053-7.193 0-5.523 4.477-10 10-10 2.823 0 5.372 1.169 7.19 3.050l0.003 0.003c1.737 1.796 2.807 4.247 2.807 6.947 0 5.523-4.477 10-10 10-2.7 0-5.151-1.070-6.95-2.81l0.003 0.003zM11.4 10l2.83-2.83-1.41-1.41-2.82 2.83-2.83-2.83-1.41 1.41 2.83 2.83-2.83 2.83 1.41 1.41 2.83-2.83 2.83 2.83 1.41-1.41-2.83-2.83z"></path>
                </symbol>
            {% endif %}

            {% if "info" in varargs %}
                <symbol id="icon-info" viewBox="0 0 32 32">
                    <title>info</title>
                    <path d="M14 9.5c0-0.825 0.675-1.5 1.5-1.5h1c0.825 0 1.5 0.675 1.5 1.5v1c0 0.825-0.675 1.5-1.5 1.5h-1c-0.825 0-1.5-0.675-1.5-1.5v-1z"></path>
                    <path d="M20 24h-8v-2h2v-6h-2v-2h6v8h2z"></path>
                    <path d="M16 0c-8.837 0-16 7.163-16 16s7.163 16 16 16 16-7.163 16-16-7.163-16-16-16zM16 29c-7.18 0-13-5.82-13-13s5.82-13 13-13 13 5.82 13 13-5.82 13-13 13z"></path>
                </symbol>
            {% endif %}
        </defs>
    </svg>
{% endmacro %}


{%- macro staticAsset(app, file_name, cache_bust=True) -%}
    {%- if cache_bust -%}
        {%- set url_path = "/{}/static/{}".format(app, file_name)|cache_bust -%}
    {%- else -%}
        {% set url_path = "/{}/static/{}".format(app, file_name) %}
    {%- endif -%}

    {%- if file_name.endswith("css") -%}
        <link rel="stylesheet" type="text/css" href="{{ url_path }}" />
    {%- endif -%}

    {%- if file_name.endswith("js") -%}
        <script src="{{ url_path }}"></script>
    {%- endif -%}
{%- endmacro %}

{%- macro link(text, url, separator="") -%}
    {{separator}} <a href="{{url}}" rel="noreferrer">{{text}}</a>
{%- endmacro -%}

{% macro queryPlan(rows) -%}
    {% if rows|count > 0 %}
        <section>
            <details>
                <summary>Query</summary>

                {% for row in rows %}
                    <code>{{ row }}</code>
                {% endfor %}
            </details>
        </section>
    {% endif %}
{%- endmacro -%}

{% macro cancelLink(url, withIcon=True) -%}
    <a class="cancel" href="{{ url }}">
        {%- if withIcon -%}
            <svg class="icon"><use xlink:href="#icon-close"></use></svg>
        {%- endif -%}
        Cancel
    </a>
{%- endmacro -%}

{% macro newerOlderPagination(newer_url, older_url) -%}
    <section class="pagination">
        {% if newer_url %}
            <a href="{{ newer_url }}" rel="noreferrer" class="next">
                <svg class="icon icon-arrow-left"><use xlink:href="#icon-arrow-left"></use></svg>
                Newer
            </a>
        {% endif %}
        {% if older_url %}
            <a href="{{ older_url }}" rel="noreferrer" class="previous">
                Older
                <svg class="icon icon-arrow-right"><use xlink:href="#icon-arrow-right"></use></svg>
            </a>
        {% endif %}
    </section>
{%- endmacro -%}

{% macro appSpecificIcon(app_url) -%}
        <link rel="shortcut icon" href="{{ app_url }}/static/app-icon.png" />
        <link rel="mask-icon" href="{{ app_url }}/static/app-icon.svg" color="black">
{%- endmacro %}
