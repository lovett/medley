---
- name: Place config file in /etc
  become: true
  shell: cp medley.conf.example /etc/medley.conf
  args:
    chdir: "{{ project_root }}"
    creates: /etc/medley.conf

- name: Install medley systemd unit file
  become: true
  template: src={{ item }} dest=/etc/systemd/system/
  with_items:
    - medley.socket
    - medley.service
  notify: reload systemd

- name: Enable medley systemd socket
  become: true
  command: systemctl enable medley.socket

- name: Start medley systemd socket
  become: true
  command: systemctl restart medley.service
